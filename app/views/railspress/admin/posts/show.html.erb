<div class="rp-page-header">
  <div>
    <h1 class="rp-page-title"><%= @post.title %></h1>
    <% if authors_enabled? && @post.author %>
      <p class="rp-byline">by <%= @post.author.public_send(Railspress.author_display_method) %></p>
    <% end %>
  </div>
  <div class="rp-page-actions">
    <% if @post.published? %>
      <%= link_to "View", "#{Railspress.blog_path}/#{@post.slug}", class: "rp-btn rp-btn--secondary", target: "_blank" %>
    <% end %>
    <%= link_to "Edit", edit_admin_post_path(@post), class: "rp-btn rp-btn--primary" %>
    <%= link_to "Back", admin_posts_path, class: "rp-btn rp-btn--secondary" %>
  </div>
</div>

<div class="rp-post-meta-card">
  <div class="rp-meta-item">
    <span class="rp-meta-label">Status</span>
    <span class="rp-badge rp-badge--<%= @post.status %>"><%= @post.status.titleize %></span>
  </div>
  <% if @post.published_at %>
    <div class="rp-meta-item">
      <span class="rp-meta-label">Published</span>
      <span class="rp-meta-value"><%= @post.published_at.strftime("%b %d, %Y at %l:%M %p") %></span>
    </div>
  <% end %>
  <div class="rp-meta-item">
    <span class="rp-meta-label">Created</span>
    <span class="rp-meta-value"><%= @post.created_at.strftime("%b %d, %Y") %></span>
  </div>
  <div class="rp-meta-item">
    <span class="rp-meta-label">Updated</span>
    <span class="rp-meta-value"><%= @post.updated_at.strftime("%b %d, %Y") %></span>
  </div>
  <div class="rp-meta-item">
    <span class="rp-meta-label">Reading Time</span>
    <span class="rp-meta-value"><%= @post.reading_time_display %> min</span>
  </div>
  <% if @post.category || @post.tags.any? %>
    <div class="rp-meta-row">
      <% if @post.category %>
        <div class="rp-meta-item">
          <span class="rp-meta-label">Category</span>
          <span class="rp-meta-value"><%= @post.category.name %></span>
        </div>
      <% end %>
      <% if @post.tags.any? %>
        <div class="rp-meta-item rp-meta-item--tags">
          <span class="rp-meta-label">Tags</span>
          <div class="rp-tag-list">
            <% @post.tags.each do |tag| %>
              <span class="rp-tag"><%= tag.name %></span>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<% if post_images_enabled? && @post.header_image.attached? %>
  <div class="rp-image-section-card">
    <%= render "railspress/admin/shared/image_section_compact",
          record: @post,
          attachment_name: :header_image,
          label: "Main Image" %>
  </div>
<% end %>

<article class="rp-card rp-card--padded rp-prose">
  <%= @post.content %>
</article>

<% if @post.meta_title.present? || @post.meta_description.present? %>
  <div class="rp-seo-preview">
    <h3 class="rp-seo-preview-title">SEO Preview</h3>
    <div class="rp-seo-title"><%= @post.meta_title.presence || @post.title %></div>
    <% if @post.meta_description.present? %>
      <div class="rp-seo-description"><%= @post.meta_description %></div>
    <% end %>
  </div>
<% end %>
